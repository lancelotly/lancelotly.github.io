<!DOCTYPE html>
<html lang="zh">
	
<head>

  <link rel="shortcut icon" type="image/png" href="https://s-media-cache-ak0.pinimg.com/736x/46/63/d3/4663d34f3c4cf94a913edfa540009920.jpg">
  <link rel="stylesheet" type="text/css" href="https://lancelotly.ml/theme/css/style.min.css">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="lancelotly">
  <meta name="description" content="Posts and writings by lancelotly">

  <link href="https://lancelotly.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Lancelot·Sirius·ly Atom" />

<meta name="keywords" content="Flash, HTML5">

  <title>
    Lancelot·Sirius·ly
&ndash; Love Card (Adobe Flash Pro CC HTML5_Canvas Project)  </title>
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-57996371-5', 'auto');
	ga('send', 'pageview');
</script></head>

<body ondragstart="return false;" ondrop="return false;">
  <aside>
    <div id="user_meta">
      
        
	<div class="logo" style="background-image: url(https://s-media-cache-ak0.pinimg.com/736x/46/63/d3/4663d34f3c4cf94a913edfa540009920.jpg);"></div>
	<p> </p>
      
	<h2><a href="https://lancelotly.ml"><font face="Comic sans MS" size="+2" color="#00008B">Lancelot·Sirius·ly</font></a></h2>
	<p>Here I'm searching the fantastic nature of our world.</p>
	<ul>
	</ul>
		<div class="social">
			<ul>
			<li><a href="http://lancelotly.tumblr.com" target="_blank"></a></li>
			<li><a href="http://weibo.com/lancelotly" target="_blank"></a></li>
			<li><a href="mailto:nmqsly@126.com" target="_blank"></a></li>
			</ul>
		</div>
    </div>
   
  </aside>

  <main>
    <header>
      <p>
      <a href="https://lancelotly.ml">Index</a> &brvbar; <a href="https://lancelotly.ml/archives.html">Archives</a>
      &brvbar; <a href="https://lancelotly.ml/feeds/all.atom.xml">Atom</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h3><a href="https://lancelotly.ml/2015/Sat 14 Nov 2015 07:00:00 PM MST/">Love Card (Adobe Flash Pro CC HTML5_Canvas Project)</a></h3>
  </div>
  <div class="article_text">
    <p>起初是从 FLASH 的 .SWF 做好之后开工的。因为 Flash Player 的种种安全问题，所以本打算直接将原来的 Action Script 工程文件转为 CreateJS，结果最后文件实在是太大，所以就直接分成了每个小片段了。</p>
<p><strong>Flash HTML5_Canvas Card 在这个链接：</strong> <a href="https://lancelot.ml/flashcard/" target="_blank">Love Card</a> :P</p>
<p>重新修改工程文件后生成了六个 html 包，就想着把它们组合在一起。参考了 <a href="https://stackoverflow.com/questions/31901564/two-flash-cc-animations-in-the-same-html-page" target="_blank">Two Flash cc Animations in the same HTML Page</a> 以及 <a href="https://forums.adobe.com/thread/1195521" target="_blank">Two animations on the same page html5 - toolkit for createjs</a> 的观点，反正经过了好多挣扎，更改了无数的名字，包括 Function name, event listener name…… 需要注意的是，不仅要更改主 html 文件里的变量名，同时也要更改 CreateJS 里的变量名。</p>
<p>这是部分 HTML5_Canvas 的修改后代码：</p>
<pre class="code HTML literal-block">
<span class="nt">&lt;head&gt;</span>
...
        <span class="nt">&lt;script&gt;</span>
                <span class="kd">var</span> <span class="nx">Lovec</span><span class="p">,</span> <span class="nx">stage</span><span class="p">,</span> <span class="nx">exportRoot</span><span class="p">,</span> <span class="nx">Winterc</span><span class="p">,</span> <span class="nx">Springc</span><span class="p">,</span> <span class="nx">Summerc</span><span class="p">,</span> <span class="nx">Fallc</span><span class="p">;</span>

                <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                        <span class="nx">Lovec</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;Love&quot;</span><span class="p">);</span>
                        <span class="c1">//imagesLovec = imagesLovec||{}; We don't need this line.
</span>                        <span class="kd">var</span> <span class="nx">loaderLovec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
                        <span class="nx">loaderLovec</span><span class="p">.</span><span class="nx">installPlugin</span><span class="p">(</span><span class="nx">createjs</span><span class="p">.</span><span class="nx">Sound</span><span class="p">);</span>
                        <span class="nx">loaderLovec</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;fileload&quot;</span><span class="p">,</span> <span class="nx">handleFileLoadLovec</span><span class="p">);</span>
                        <span class="nx">loaderLovec</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="nx">handleCompleteLovec</span><span class="p">);</span>
                        <span class="nx">loaderLovec</span><span class="p">.</span><span class="nx">loadManifest</span><span class="p">(</span><span class="nx">Love</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">manifest</span><span class="p">);</span>

                        <span class="nx">Winterc</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;Winter&quot;</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">loaderWinterc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
                        <span class="nx">loaderWinterc</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;fileload&quot;</span><span class="p">,</span> <span class="nx">handleFileLoadWinterc</span><span class="p">);</span>
                        <span class="nx">loaderWinterc</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="nx">handleCompleteWinterc</span><span class="p">);</span>
                        <span class="nx">loaderWinterc</span><span class="p">.</span><span class="nx">loadManifest</span><span class="p">(</span><span class="nx">Winter</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">manifest</span><span class="p">);</span>

                        <span class="p">...</span>
                <span class="p">}</span>

                <span class="kd">function</span> <span class="nx">handleFileLoadLovec</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="nx">imagesLovec</span><span class="p">[</span><span class="nx">evt</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span> <span class="p">}</span>
                <span class="p">}</span>

                <span class="kd">function</span> <span class="nx">handleCompleteLovec</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">exportRoot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Love</span><span class="p">.</span><span class="nx">Love_Canvas</span><span class="p">();</span>

                        <span class="nx">stage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">Stage</span><span class="p">(</span><span class="nx">Lovec</span><span class="p">);</span>
                        <span class="nx">stage</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">exportRoot</span><span class="p">);</span>
                        <span class="nx">stage</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
                        <span class="nx">stage</span><span class="p">.</span><span class="nx">enableMouseOver</span><span class="p">();</span>

                        <span class="nx">createjs</span><span class="p">.</span><span class="nx">Ticker</span><span class="p">.</span><span class="nx">setFPS</span><span class="p">(</span><span class="nx">Love</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">fps</span><span class="p">);</span>
                        <span class="nx">createjs</span><span class="p">.</span><span class="nx">Ticker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;tick&quot;</span><span class="p">,</span> <span class="nx">stage</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="kd">function</span> <span class="nx">playSoundLovec</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">loop</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">createjs</span><span class="p">.</span><span class="nx">Sound</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">Sound</span><span class="p">.</span><span class="nx">INTERRUPT_EARLY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">loop</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="c1">//Winterc
</span>                <span class="kd">function</span> <span class="nx">handleFileLoadWinterc</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="nx">imagesWinterc</span><span class="p">[</span><span class="nx">evt</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span> <span class="p">}</span>
                <span class="p">}</span>

                <span class="kd">function</span> <span class="nx">handleCompleteWinterc</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">exportRoot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Winter</span><span class="p">.</span><span class="nx">Winter_Canvas</span><span class="p">();</span>

                        <span class="nx">stage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">Stage</span><span class="p">(</span><span class="nx">Winterc</span><span class="p">);</span>
                        <span class="nx">stage</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">exportRoot</span><span class="p">);</span>
                        <span class="nx">stage</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
                        <span class="nx">stage</span><span class="p">.</span><span class="nx">enableMouseOver</span><span class="p">();</span>

                        <span class="nx">createjs</span><span class="p">.</span><span class="nx">Ticker</span><span class="p">.</span><span class="nx">setFPS</span><span class="p">(</span><span class="nx">Winter</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">fps</span><span class="p">);</span>
                        <span class="nx">createjs</span><span class="p">.</span><span class="nx">Ticker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;tick&quot;</span><span class="p">,</span> <span class="nx">stage</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="p">...</span>
        <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
...
</pre>
<p>需要注意其中那些被修改了的关键名：Love, Lovec, Winter, Winterc 。</p>
<p>博客更新：优化了大部分 CSS 代码，嗯！</p>
<p>Meow！</p>
<blockquote>
Lazing on a sunny afternoon!</blockquote>
<div style="background-image: url(https://bitly.com/1YblGpT); background-repeat: no-repeat; background-size: 100%">
<img alt="best time" src="https://bitly.com/1YblGpT" style="visibility:hidden; width: 100%;"/>
</div>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 14 November 2015</p>
    <p>Category: <a href="https://lancelotly.ml/category/essay.html">ESSAY</a>
 &ndash; Tags:
      <a href="https://lancelotly.ml/tag/flash.html">Flash</a>,      <a href="https://lancelotly.ml/tag/html5.html">HTML5</a>    </p>
  </div>

<script async src="https://code.jquery.com/jquery-2.2.3.min.js" crossorigin="anonymous"></script>

<script type="text/javascript">
	function toggleDisqusComments(container){
		if(jQuery(container).has("div").length>0){
			jQuery(container).empty();
			return;
		}
		var d = document, s = d.createElement('script');
		s.src = 'https://lancelotly.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	}	
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<div id="disqus_container">
    <div style="margin-bottom:20px" class="right"></div>

        <a href="#comment-disqus" class="comment" onclick="toggleDisqusComments('#disqus_thread')">
            <strong>Disqus</strong> Comments / 请点击查看 <strong>Disqus</strong> 评论
		<div id="disqus_thread"></div>
		</a>
</div>
</article>

	
    <div id="ending_message">
		<p align="right"> <a href="#" class="back-top" title="Back to the top"><i> <i class="fa fa-arrow-up"></i> <img src="https://c.hime.io/images/8ppj.gif" title="Back to the top" oncontextmenu="return false;"> </i></a> </p>
      <p><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc/4.0/88x31.png" /></a><br />All by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName"><font color="#4169E1">lancelotly</font></span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
      <p>Proudly powered by <a href="http://getpelican.com" target="_blank">Pelican</a> and <a href="https://github.com" target="_blank">Github</a>. Theme origin from <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">Giulio Fidente</a>, and modified by <a href="http://lancelotly.tumblr.com" target="_blank"><font color="#4169E1">lancelotly</font></a>.
    </div>
  </main>
</body>
</html>